{% load static %}
{% load user_filters %}
<h5>Запасные части</h5>
<table class="table table-sm table-hover">
  <thead class="table">
    <tr>
      <th scope="col">Производитель</th>
      <th scope="col">Наименование</th>
      <th scope="col">Тип</th>
      <th scope="col">Инв. номер</th>
      <th scope="col">Количество</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for componentstorage in storage.components.all %}
      {% include './conponentstorage_detail.html' %}
    {% endfor %}
    {% if user.is_authenticated %}
      <tr>
          <td colspan="3">{{ component_add_form.component|addclass:"form-control form-control-sm" }}</td>
          <td>{{ component_add_form.inventory_number|addclass:"form-control form-control-sm" }}</td>
          <td>{{ component_add_form.amount|addclass:"form-control form-control-sm" }}</td>
          <td>
            <button class="btn btn-sm btn-secondary me-1"
              hx-post="{% url 'warehouse:component-storage-create' storage.pk %}"
              hx-target="closest tr"
              hx-swap="beforebegin"
              hx-include="closest tr"
            >
              Добавить
            </button>
          </td>
      </tr>
    {% endif %}
  </tbody>
</table>
<br>
<br>
<h5>Расходные материалы</h5>
<table class="table table-sm table-hover">
  <thead class="table">
    <tr>
      <th scope="col">Наименование</th>
      <th scope="col">Артикул</th>
      <th scope="col">Инв. номер</th>
      <th scope="col">Количество</th>
      <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
    {% for materialstorage in storage.materials.all %}
      {% include './materialstorage_detail.html' %}
    {% endfor %}
    {% if user.is_authenticated %}
      <tr>
          <td>{{ material_add_form.material|addclass:"form-control form-control-sm" }}</td>
          <td></td>
          <td>{{ material_add_form.inventory_number|addclass:"form-control form-control-sm" }}</td>
          <td>{{ material_add_form.amount|addclass:"form-control form-control-sm" }}</td>
          <td>
            <button class="btn btn-sm btn-secondary me-1"
              hx-post="{% url 'warehouse:material-storage-create' storage.pk %}"
              hx-target="closest tr"
              hx-swap="beforebegin"
              hx-include="closest tr"
            >
              Добавить
            </button>
          </td>
        </form>
      </tr>
    {% endif %}
  </tbody>
</table>
