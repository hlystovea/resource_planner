{% extends "base.html" %}
{% block title %}Склад{% endblock %}
{% block content %}
{% load static %}
{% load is_root %}
    <nav style="--bs-breadcrumb-divider: '>';" aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Главная</a></li>
            <li class="breadcrumb-item">Места хранения</li>
        </ol>
    </nav>
    <figure class="text-center">
        <h3>Места хранения</h3>
    </figure>
    <div class="row">
        <div class="col-4">
            <style>
                ul {
                    list-style-type: none;
                }
            </style>
            <ul>
                {% for storage in storage_list|is_root %}
                    <li>
                        {% if storage.storage_count %}
                            <a class="icon-link align-middle" href="#"
                                hx-get="{% url 'warehouse:storage-list' %}?storage={{ storage.pk }}"
                                hx-target="closest li"
                                hx-swap="outerHTML"
                            >
                                <img src="{% static 'icons/plus-square.svg' %}" height="16" fill="currentColor" class="bi bi-plus-square">
                            </a>
                        {% endif %}
                        <a href="#" {% if not storage.storage_count %}style="margin-left: 21px;"{% endif %}
                            hx-get="{% url 'warehouse:storage-detail' storage.pk %}"
                            hx-target="#storageContent"
                        >
                            {{ storage.name }}
                        </a>
                        {% if storage.storage_count %}
                            <span class="position-absolute badge bg-danger rounded-pill ms-1" style="--bs-badge-font-size: .5rem;">
                                {{ storage.storage_count }}
                            </span>
                        {% endif %}
                    </li>
                {% endfor %}
                <li>
                    <div class="input-group input-group-sm mb-3" style="margin-left: 21px;">
                        <input type="text" class="form-control" name="name" placeholder="Наименование.." required>
                        <button class="btn btn-outline-secondary" type="button"
                            hx-post="{% url 'warehouse:storage-create' %}"
                            hx-target="closest li"
                            hx-swap="beforebegin"
                            hx-include="previous input"
                        >
                            <img src="{% static 'icons/floppy.svg' %}" height="16" fill="currentColor" class="bi bi-floppy">
                        </button>
                    </div>
                </li>
            </ul>
        </div>
        <div class="col-8">
            <div id="storageContent">
                <div class="row h-100 justify-content-center align-items-center">
                    <div class="w-50 p-3">
                        <p class="text-body-secondary text-center">
                                Для просмотра просмотра содержимого места хранения воспользуйтесь меню слева
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
